(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{108:function(e,t,n){e.exports={preloader:"Preloader_preloader__quI4H"}},109:function(e,t,n){e.exports={image:"ProfileContent_image__2CuWr",userPhotoImg:"ProfileContent_userPhotoImg__1rhE-"}},110:function(e,t,n){e.exports={item:"Post_item__M1xtD"}},118:function(e,t,n){},122:function(e,t,n){},21:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__R_ACZ",dialogsContainer:"Dialogs_dialogsContainer__2r-jA",dialogsItem:"Dialogs_dialogsItem__3kp7G",messages:"Dialogs_messages__Nmt2I",message:"Dialogs_message__3f32W"}},23:function(e,t,n){e.exports={nav:"Navbar_nav__2m4Cj",item:"Navbar_item__3gY1P",active:"Navbar_active__1Khgz"}},245:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n.n(s),a=(n(118),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,248)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),s(e),r(e),a(e),i(e)}))}),i=n(52),c=n.n(i),o=n(4),u=n(5),l=n(8),d=n(9),j=(n(122),n(13)),b=n(23),p=n.n(b),h=n(1),f=function(){return Object(h.jsxs)("nav",{className:p.a.nav,children:[Object(h.jsx)("div",{className:p.a.item,children:Object(h.jsx)(j.b,{to:"/profile",activeClassName:p.a.active,children:"Profile"})}),Object(h.jsx)("div",{className:p.a.item,children:Object(h.jsx)(j.b,{to:"/dialogs",activeClassName:p.a.active,children:"Messages"})}),Object(h.jsx)("div",{className:p.a.item,children:Object(h.jsx)(j.b,{to:"/users",activeClassName:p.a.active,children:"Users"})}),Object(h.jsx)("div",{className:p.a.item,children:Object(h.jsx)(j.b,{to:"/settings",activeClassName:p.a.active,children:"Settings"})})]})},g=n(10),O=n(3),m=n(2),x=n(247),v="ADD-MESSAGE",P={dialogs:[{id:Object(x.a)(),name:"Alex"},{id:Object(x.a)(),name:"Natali"},{id:Object(x.a)(),name:"Anna"}],messages:[{id:Object(x.a)(),message:"I am a developer"},{id:Object(x.a)(),message:"bla bla"},{id:Object(x.a)(),message:"la la"}]},w=n(21),y=n.n(w),S=function(e){var t="/dialogs/"+e.id;return Object(h.jsx)("div",{className:y.a.dialog+" "+y.a.active,children:Object(h.jsx)(j.b,{to:t,children:e.name})})},A=function(e){return Object(h.jsx)("div",{className:y.a.message,children:e.message})},U=n(38),C=function(e){return Object(h.jsx)(U.c,{initialValues:{newMessageText:""},onSubmit:function(t,n){e.addMessageCallback(t.newMessageText),n.setSubmitting(!1),n.resetForm()},children:function(e){return Object(h.jsxs)(U.b,{children:[Object(h.jsx)("div",{children:Object(h.jsx)(U.a,{as:"textarea",type:"text",name:"newMessageText",placeholder:"Enter text"})}),Object(h.jsx)("button",{type:"submit",children:"Add post"})]})}})},k=n(12),N=n(20),T=n(115),I=function(e){return{isAuth:e.auth.isAuth}};function L(e){return Object(k.b)(I)((function(t){var n=t.isAuth,s=Object(T.a)(t,["isAuth"]);return n?Object(h.jsx)(e,Object(m.a)({},s)):Object(h.jsx)(g.a,{to:"/login"})}))}var D=Object(N.c)(Object(k.b)((function(e){return{dialogsPage:e.dialogsPage}}),(function(e){return{addMessageCallback:function(t){e(function(e){return{type:v,newMessageText:e}}(t))}}})),L)((function(e){var t=e.dialogsPage,n=t.dialogs.map((function(e){return Object(h.jsx)(S,{id:e.id,name:e.name},e.id)})),s=t.messages.map((function(e){return Object(h.jsx)(A,{message:e.message},e.id)}));return Object(h.jsxs)("div",{className:y.a.dialogs,children:[Object(h.jsxs)("div",{className:y.a.dialogsContainer,children:[Object(h.jsx)("div",{className:y.a.dialogsItem,children:n}),Object(h.jsx)("div",{className:y.a.messages,children:s})]}),Object(h.jsx)(C,{addMessageCallback:e.addMessageCallback})]})})),E=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("h3",{children:" Settings "})})},G=n(107),F=n.n(G).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"4fa02be0-fc45-4f63-a405-9880e98f8e95"}}),M=function(){return F.get("auth/me")},_=function(e){return F.post("/auth/login",e)},q=function(){return F.delete("/auth/login")},z=function(e,t){return F.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},X=function(e){return F.delete("follow/".concat(e))},R=function(e){return F.post("follow/".concat(e))},V=function(e){return F.get("profile/".concat(e))},B=function(e){return F.get("profile/status/".concat(e))},W=function(e){return F.put("profile/status/",{status:e})},H="FOLLOW",Y="UNFOLLOW",K="SET_USERS",Z="SET_CURRENT_PAGE",J="SET_TOTAL_USERS_COUNT",Q="TOGGLE_IS_FETCHING",$="TOGGLE_IS_FOLLOWING_PROGRESS",ee={users:[{name:null,id:null,photos:{small:null,large:null},status:null,followed:!1}],pageSize:100,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},te=function(e){return{type:Q,isFetching:e}},ne=function(e,t){return{type:$,isFetching:e,userId:t}},se=n(43),re=n.n(se),ae=n.p+"static/media/photoAvatar.22d7f1c8.jpg",ie=function(e){for(var t=[],n=Math.ceil(e.totalUsersCount/e.pageSize),s=1;s<=n;s++)t.push(s);return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:t.map((function(t){return Object(h.jsx)("span",{className:e.currentPage===t&&re.a.selectPageActive?re.a.selectPageActive:re.a.selectPage,onClick:function(n){return e.onPageChangedCallback(t)},children:t},t)}))}),e.users.users.map((function(t){return Object(h.jsxs)("div",{children:[Object(h.jsxs)("span",{children:[Object(h.jsx)("div",{children:Object(h.jsxs)(j.b,{to:"./profile/"+t.id,children:[" ",Object(h.jsx)("img",{src:null!==t.photos.small?t.photos.small:ae,className:re.a.userPhoto,alt:"User"})]})}),Object(h.jsx)("div",{children:t.followed?Object(h.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.unFollow(t.id)},children:"Unfollow"}):Object(h.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.follow(t.id)},children:"Follow"})})]}),Object(h.jsxs)("span",{children:[Object(h.jsxs)("span",{children:[Object(h.jsx)("div",{children:t.name}),Object(h.jsx)("div",{children:t.status})]}),Object(h.jsxs)("span",{children:[Object(h.jsx)("div",{children:"u.location.country"}),Object(h.jsx)("div",{children:"u.location.city"})]})]})]},t.id)}))]})},ce=n(108),oe=n.n(ce),ue=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("img",{className:oe.a.preloader,src:"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAANcAAADqCAMAAAAGRyD0AAAAhFBMVEX39/fppEL4/P/3+fvpoz/pojvooTjonSr3+fzooDXoni/onzLonSj4+Pfz27738+315tT27uPy1rT39fD04MjqqUvssF/rq1Hy2LjwyZnvworuvX315tP38en2693ttm3tu3rx0KfstGnwx5TxzqLvw4zrrVjuuHPttWrz3cTvyJfw0a1oT2LNAAANH0lEQVR4nO1daYOqvA6WpKVQwA33bdxGj+P//38XHF+l0FJAQJjr8/Uch6Zt0uzpdD744IMPPvjgg/93oGVBCAvx3UspDwiwGX6f9/v9dt5dwx+hDGHzTblNKSGUmjab7nx495pKAGy+mGlEQGx+8K13L+tFoLdgxIjDtGftPjIcjM0EVSH40msxm1krJ3lY9yObtJcwa8VVZBkGPXnvXl9B4Fp5WrcT+2ocj+HvIxu8smn/C6ZpZBmGc2wUYQi97uFrahin83zUUb+yMLdTyTIMd9McFkPo7l3bJCGo6fBlX0EZrl0NWQbZN+bAYDQWZQFlX2vp6mBBdXQZbNWMA8POMvnKUnaVEeYzLVkGPTfiwHAtf2X5Mrk8vOq463ZgvTeQEQeuqULA2UlGgUm6MLz/cNaAi+gbyqXa2zhhHs9AlkElJ1034F+KIOA7cYHYz0QXGb+dLmuYulI2EG4UzrKwV/A2v12Z8tMXSkWtCI9yPT6xHes3M5g11yyU9THPf7+Dq1UOxDp8IahbpygCXqMr1D/Xm35/4Ot00JfJuji6JQqsYmW8hzx5DxFwdJhwxgMw++u4qdLRk0ErckaR72eVG9xPUDU42I75eFGIycc7rzJ3iM7mCGDOI18vKuet3tKNnzSx7V1VrObptT1R2cuiHibfZbhy6b2wx/1KHjoc6LefTKOfzqhHDaM3DL2z6jPE3VVBGG4y0GVEv4y7LIJDeL7Qn6b8hi8qICwLu8To0puVwU+ijzn641TZ5FSgS2Y6L1EGwFZvV/KoCPVOmh/wQ/mE+Rno+idqUgO9H2AS+QUstReXdUuX96DffPMgfhW+dQuN+m2wm0GAOr2yxT0stYTZ3dhHPbW99rvKn8hxeVnEDE2Yea/CGmr1BxbfTNyk3kQq3MJDJr1LVK7LgPadlTjNrEsKYXQc1Scz8O/tI6X7iLUXkV+SWwkXVxl3GPvRp2uXTZ003EHJB4ab9AMTtY0HYX1Tvh38SwinZFA/79txLFskwiKVA9hIupHonyVxPRpzh2R5Hn9BTqW/YR5J2VNTpQwgjKaiLktMtoy5iLM5G29w44ZNZiBAYIEnDVXsq28imar9LwFlZ+6YNNgWQqjNyc8gbilmeEX+gyO/F3qierPFxKB0/G8+wthD21WJN0JTH0wE/zLfngJNa7+49jFp2cMpI3sFr+SuAF0I/TOzw50Nttbk5k9PVPm6cvFGx1qv0n8RM5AaiJD5Gia0miywemcmXAiTH4UrA30iER4x2VYAmMkI/d3D/Fo9XJLGqnMSbhh6C1f8P4GRPnxZRGWwxovTBTsZ+1AqvoQwWIY39U6UycmxhLh+lXTBVf7HiSkyTyAEZttx6AVj/HQYQRnvJGR9vgK6vvN9EFdKYZeQ4cEj4A0Gm7VXltMys7oRKhz5Ppny6trfkqMv1cuc5/2SqKFpfznNTqg8bp/NyXNDzkBFL41zKw8DZ/SiGrkDZhp3ult1NAfSdM8ocj7LME79u4WUlzywfjJeRJaLJXCgMa6qTmXSLeCxkEmuhWBXo6DxqsPAGSUiz6fNa6NVbF0VQXdkO7Ccx9WxDjrnReUZWnDUBg7zeze0UTteun8ruQadGzuZTKGFpfPeVX9eHeyZGlmfTH7R/k0tf9WQx4SblKxZI8wIzr232qi4XUdajNVPy5u19/kNIl2wqqZ8OmVWuhHmzBXhBI2hIIZLqwN6kvzG28Y6xQoJNH5kVthplxehtzGZuekuewU3NtXvT6sI7SqA0D2xqGSkNlsUT01JTZ6uNzkLYXOcuNyxAzjMXM78VxJuPLVG71SSYpACtMDbXGbXYXe1hheziNRBOPqWbHBEtKwyfA2Wwkstxt9aCLmX2pz6dTKXDnjzhef7jcRLTdi20yCyEGZnY7xc5WSMsLguShlxSPftecVR+BMeVmm6MsdfKmDwbd9CVWGkip2G1SX+FQFM7rvO57k1e/BGx+VkevpaDAel+KjLA3YfykOR8Hm24q43AM4Py7NyB1mdiCjndWp2lSNCl5kpqoJYT676i4h4YRx9vQ6Cv7rMZqPBq5pY5XiqesTW6UDgXyc81J0dTherhlMGh18nI3Ev6dcQvTm3n8zIJ9VkPZcGODLbNB06Sl8m9A3R6iKsglTTMgG94WHe1ThwYJZUdJ19w7V3y9K9q3LDpICXrllQGZJ2A0oDXwGqDH9Fxl1LYO1ULl5itJkuTx29yPCYNxZpHvm80bMmITXu2Ygq8GKAtJz9nDktTUJqHkr5Sc91IT0Bmub2izQF6Yk77bVGNefVWrr+Kn91MC3Rqvny0AJ/jTIrOLVK8O3NCDRA72i4jG83kjYt3fbqG7g2bkY+dSWZ4Cn1cU3XD591gG7S9LCUkfKm6/PWM2QsW2pr7S+MdA+S5O1hv532slDSb18lRYKzVvo3BJVCRlcHhkl/lD1puD9KTDVx4rXFN8CKilKRsBZovLB/nobCUkT/O5LbQvkpb+T2HYhUnNhKNy70jlMWprY43F423T9/BxxdPdOgBb3RbDi8ND+e8gDMTMc0bXehWfBvaks9ayoFFl6O82GvBUyTF8FJtNaW+uD/C9iSuHk+WLAeDa/XQM43LhHlBYB/HP++y8yYyxvWthCIR/7Qo4jJDu3tMR4F9k6i0WyPB3/gVcBBotKFOA1qWV0UvsSHSOzSWzTVDfiSuRBpw51sWuBF7qLns3azmKrURmyL1zrgShVRyVlz+gYENqNSh1BXQjc9SmR53Z/FcaSwgtV9MuUdrhoDuDqOSU0+lvtiUvI3eJPvISzv/ENcaTfElD7q9VWx5Ye1e65bmmye0h+vyXRFj0Ne9amOE7HaV5sZOIuG7WReUXWlaAN63SshFpA7knEe1rdKcDRhNoEKYsG/LA6OI5XgkPvymwGx/bu0a4EyI8BsLlmx07Cl/+Uqj5zbuybrvdGGNYqog1xyNFlqdIRgCjHkUQd5j/J8jXHqB3Tvje9sQ5VlEtCe8AO4oybfwhDW4Mwch9spPiYr3q2VOqumk/VbKDTqY9pCw26tT8ooOxdtL1Az9N5p6G9ZoPZTajrs3JJ4ZSbcCkW/F9+7kfeHqLoBb3b1HyPqgw8++OB1WM2son8NCL3hYjINR6T+pecMBkvXvrWpMDm5/hnK4Bjpfk2cadnDFN4E2IoWGWEtUO/1gGUiRbvpVmYWyAZUqmztNsGX+XHUGZltgWIyY2KwX/0I25pJi2yy/VruT7SH7+Yw2HxPKZnsivXnUlXwVd5qWbcub+mGBQ7Etgv1srJUo1noe8/LmzzW5UrncmugHHzK31rMDIvIdhfpg69s4fvWIm2x6USR+fXNPK/Yqlh+xU45kO2t/BXLWigQwmqmPIyV+xdpX6YYRfDe9ysW8ymyGEUP+vfqG7G2E4Xaqsv1w9ydBktFpDVgyBOk0Mss0+fHpS81HzB6EXkxnoBF/MRIDX3n04GbZ8Nss6gIe+QePciqfkyADtbKMe+L+SpsC8JO8G+c1g1wA1i9BeOOw8bFOpr/AtZ3f1SYCDdriD8KOqvu5cVmp+F0r8X+NNke+5I/9K46llI+iwp/b2C2rlej1fqPuYJhcDCCe+7w8c+fqWMJzdZHRTAx2fyvRDexN46q+86kmgKd2nfLj7XRoqfS/YoI6K/9epkX9vFkReWc28KfGHwbjLPxT40pJNYsqTmW3KUD5u6NfQPmLeKdKfhRSQuScpvgwPapmtbWu1VuShfwNSgBx+gXmDQxvnzILc4SZ+DExggRs55gh7xXYpGBwQrEfWE1NUSKNvJ4osS07fhY6ZoywqunK8a/FQxnl3626nsIsQZCNVU0yYdN2TImsAA6Xv4BJ7F9q6mRmnwGo6Q5neUPzwal04Ui9yNQlXo9L2nXRQY3/F6Fn3oEvawGTlLMA0fnNkmbUD6VFJ0hjM6UMT6dxxudiNU0wZbV5FaRzZxOxGzQmzxXR9xjnDAcnH7HpweqUvwfRYWG/qtLkxKiUDc4P/Fve+L8yfjacRWZw8Zjhy30VCNOfe0XH5Nm7rATrjxYxpQSVyhiwrUwXs6J1aZao0cqP7Xr9FniV+SNISzxduEqLlvEghCYiKLBjZVuWYM9Mymhtrutd34VDM37dEkqm8Yk6esZrYPGUYzshCgPp88tv5a72n0n2Jl9BeKMkXNXUmsgKUON1kEnB9AmzQEMHWHvcJyElnrPl2aIyKrXoxcxacHZDa6ee0I6mJo96cLEy262YnISziR0uU+6ktfUPLaCrpEkKEgj9zBBdl2jWV+DTIWMRtzjGmAtE53LgKSoMRq8j2uATS93fEBShSqU43uxbIOCIdX64cUHKziCgmhdBNW5PV104u2AacyWh2OEA6nRqGGfqRDHlSbHlMLwv5JHwvftIes2deu/+eSUbZMBF2u9sHnYCO7UbUiANyPQu956y3J+ls5HQ/D63dlo3S6qQiAMLrPuSj0IurWNFlu78A8++OCDDz744IMPPvjgbfgfmH+lw6K7FHkAAAAASUVORK5CYII=",alt:"preloader"})})},le=function(e){return e.usersPage},de=function(e){return e.usersPage.pageSize},je=function(e){return e.usersPage.totalUsersCount},be=function(e){return e.usersPage.currentPage},pe=function(e){return e.usersPage.isFetching},he=function(e){return e.usersPage.followingInProgress},fe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).onPageChanged=function(t){e.props.getUsers(t,e.props.pageSize),e.props.setCurrentPage(t)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return Object(h.jsxs)(h.Fragment,{children:[this.props.isFetching?Object(h.jsx)(ue,{}):null,Object(h.jsx)(ie,{follow:this.props.follow,unFollow:this.props.unFollow,users:this.props.users,currentPage:this.props.currentPage,totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,onPageChangedCallback:this.onPageChanged,followingInProgress:this.props.followingInProgress})]})}}]),n}(r.a.Component),ge=Object(N.c)(Object(k.b)((function(e){return{users:le(e),pageSize:de(e),totalUsersCount:je(e),currentPage:be(e),isFetching:pe(e),followingInProgress:he(e)}}),{follow:function(e){return function(t){t(ne(!0,e)),R(e).then((function(n){0===n.data.resultCode&&t(function(e){return{type:H,userId:e}}(e)),t(ne(!1,e))}))}},unFollow:function(e){return function(t){t(ne(!0,e)),X(e).then((function(n){0===n.data.resultCode&&t(function(e){return{type:Y,userId:e}}(e)),t(ne(!1,e))}))}},setCurrentPage:function(e){return{type:Z,currentPage:e}},toggleFollowingInProgress:ne,getUsers:function(e,t){return function(n){n(te(!0)),z(e,t).then((function(e){var t,s;n((t=e.items,{type:K,users:t})),n((s=e.totalCount,{type:J,totalCount:s})),n(te(!1))}))}}}))(fe),Oe=n(109),me=n.n(Oe),xe=n(15),ve=function(e){var t=e.status,n=e.updateUserStatus,r=Object(s.useState)(!1),a=Object(xe.a)(r,2),i=a[0],c=a[1],o=Object(s.useState)(t),u=Object(xe.a)(o,2),l=u[0],d=u[1];Object(s.useEffect)((function(){d(t)}),[t]);return Object(h.jsxs)("div",{children:[!i&&Object(h.jsx)("div",{children:Object(h.jsx)("span",{onDoubleClick:function(){c(!0)},children:t||"---"})}),i&&Object(h.jsx)("div",{children:Object(h.jsx)("input",{onChange:function(e){d(e.currentTarget.value)},onBlur:function(){c(!1),n(l)},autoFocus:!0,value:l})})]})},Pe=function(e){return e.profile?Object(h.jsx)("div",{children:Object(h.jsxs)("div",{children:[Object(h.jsx)("img",{className:me.a.userPhotoImg,src:e.profile.photos.large||ae,alt:"user"}),Object(h.jsx)(ve,{status:e.status,updateUserStatus:e.updateUserStatus}),Object(h.jsxs)("div",{children:["Full name: ",e.profile.fullName]}),e.profile.lookingForAJob?Object(h.jsx)("div",{children:"looking for a job"}):"",Object(h.jsx)("div",{children:"Contacts:"}),Object(h.jsxs)("ul",{children:[e.profile.contacts.github?Object(h.jsxs)("li",{children:[" GitHub: ",e.profile.contacts.github]}):null,e.profile.contacts.vk?Object(h.jsxs)("li",{children:[" vk: ",e.profile.contacts.vk]}):null,e.profile.contacts.facebook?Object(h.jsxs)("li",{children:[" facebook: ",e.profile.contacts.facebook]}):null,e.profile.contacts.instagram?Object(h.jsxs)("li",{children:[" instagram: ",e.profile.contacts.instagram]}):null,e.profile.contacts.twitter?Object(h.jsxs)("li",{children:[" twitter: ",e.profile.contacts.twitter]}):null,e.profile.contacts.website?Object(h.jsxs)("li",{children:[" website: ",e.profile.contacts.website]}):null,e.profile.contacts.youtube?Object(h.jsxs)("li",{children:[" youtube: ",e.profile.contacts.youtube]}):null,e.profile.contacts.mainLink?Object(h.jsxs)("li",{children:[" mainLink: ",e.profile.contacts.mainLink]}):null]})]})}):Object(h.jsx)(ue,{})},we="ADD-POST",ye="SET_USER_PROFILE",Se="SET_USER_STATUS",Ae={posts:[{id:1,message:"Hey la lay",likesCount:15},{id:2,message:"Bla bla",likesCount:11}],profile:null,status:""},Ue=function(e){return{type:Se,status:e}},Ce=n(110),ke=n.n(Ce),Ne=function(e){return Object(h.jsxs)("div",{className:ke.a.item,children:[Object(h.jsx)("img",{src:"https://ezyschooling.com/_nuxt/img/default-avatar.7a6572e.png",alt:"user"}),e.message,Object(h.jsxs)("div",{children:["like ",e.likesCount]})]})},Te=n(34),Ie=n(59),Le=n.n(Ie),De=n(30),Ee=n(116),Ge=function(e){var t,n=Te.a().shape({newPostText:Te.b().min(1,"Too Short!").max(50,"Too Long!").required("")}),s=Object(De.d)({resolver:Object(Ee.a)(n)}),r=s.register,a=s.handleSubmit,i=s.formState.errors,c=s.resetField;return Object(h.jsxs)("form",{onSubmit:a((function(t){e.addPostCallback(t.newPostText),c("newPostText")})),children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("input",Object(m.a)(Object(m.a)({},r("newPostText")),{},{type:"newPostText",placeholder:"Enter text",className:"".concat(Le.a.input," ").concat(i.newPostText?Le.a.errorInput:Le.a.input)})),Object(h.jsx)("p",{style:{color:"red"},children:null===(t=i.newPostText)||void 0===t?void 0:t.message})]}),Object(h.jsx)("button",{type:"submit",children:"Add post"})]})},Fe=Object(k.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),(function(e){return{addPostCallback:function(t){e(function(e){return{type:we,newPostText:e}}(t))}}}))((function(e){var t=e.posts.map((function(e){return Object(h.jsx)(Ne,{message:e.message,likesCount:e.likesCount},e.id)}));return Object(h.jsxs)("div",{children:[Object(h.jsx)(Ge,{addPostCallback:e.addPostCallback}),Object(h.jsx)("div",{children:t})]})})),Me=function(e){return Object(h.jsxs)("div",{children:[Object(h.jsx)(Pe,{profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus}),Object(h.jsx)(Fe,{})]})},_e=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=+this.props.match.params.userId;e||(e=this.props.authUserId)||this.props.history.push("/login"),e&&(this.props.getUserProfile(e),this.props.getUserStatus(e))}},{key:"componentDidUpdate",value:function(e,t){return e!==this.props||t!==this.state}},{key:"render",value:function(){return Object(h.jsx)("div",{children:Object(h.jsx)(Me,Object(m.a)(Object(m.a)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateUserStatus:this.props.updateUserStatus}))})}}]),n}(r.a.Component),qe=Object(N.c)(Object(k.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,isAuth:e.auth.isAuth,authUserId:e.auth.userId}}),{getUserProfile:function(e){return function(t){V(e).then((function(e){var n;t((n=e.data,{type:ye,profile:n}))}))}},getUserStatus:function(e){return function(t){B(e).then((function(e){t(Ue(e.data))}))}},updateUserStatus:function(e){return function(t){W(e).then((function(n){0===n.data.resultCode&&t(Ue(e))}))}}}),g.g,L)(_e),ze=n(60),Xe=n.n(ze),Re=function(e){var t=e.isAuth,n=e.login,s=e.logoutUserCallback;return Object(h.jsxs)("header",{className:Xe.a.header,children:[Object(h.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQrPotIEiUTbNLUNoJE5gAdjdirbVcFSvLFvg&usqp=CAU",alt:"Logo"}),t?Object(h.jsxs)("div",{className:Xe.a.loginBlock,children:[n," ",Object(h.jsx)("button",{onClick:s,children:"Log out"})," "]}):Object(h.jsx)("div",{className:Xe.a.loginBlock,children:Object(h.jsx)(j.b,{to:"/login",children:"Login"})})]})},Ve="SET_AUTH_USER_DATA",Be={userId:null,email:null,login:null,isAuth:!1,error:null},We=function(e,t,n,s){return{type:Ve,payload:{userId:e,email:t,login:n,isAuth:s}}},He=function(e){return{type:"SET_ERROR",error:e}},Ye=function(){return function(e){return M().then((function(t){if(0===t.data.resultCode){var n=t.data.data,s=n.id,r=n.email,a=n.login;e(We(s,r,a,!0))}return t}))}},Ke=function(e){return function(t){_(e).then((function(e){0===e.data.resultCode?t(Ye()):function(e,t){e.messages.length?t(He(e.messages[0])):t(He("Some error occurred"))}(e.data,t)}))}},Ze=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(h.jsx)(Re,Object(m.a)(Object(m.a)({},this.props),{},{logoutUserCallback:this.props.logoutUser}))}}]),n}(r.a.Component),Je=Object(k.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logoutUser:function(){return function(e){q().then((function(t){0===t.data.resultCode&&e(We(null,null,null,!1))}))}}})(Ze),Qe=n(31),$e=n.n(Qe),et=function(){var e=Object(k.d)((function(e){return e.auth.isAuth})),t=Object(k.d)((function(e){return e.auth.error})),n=Object(k.c)(),s=Te.a().shape({password:Te.b().min(8,"Too Short!").max(20,"Too Long!").required("Required"),email:Te.b().email("Invalid email").required("Required")}),r=Object(U.d)({initialValues:{email:"",password:"",rememberMe:!1},onSubmit:function(e){n(Ke(e))},validationSchema:s});return e?Object(h.jsx)(g.a,{to:"/profile"}):Object(h.jsxs)("form",{onSubmit:r.handleSubmit,children:[Object(h.jsx)("div",{children:Object(h.jsx)("input",{id:"email",name:"email",type:"email",onChange:r.handleChange,value:r.values.email,placeholder:"Email",className:"".concat($e.a.input," ").concat(r.errors.email&&r.touched.email?$e.a.errorInput:$e.a.input),onBlur:r.handleBlur})}),r.errors.email&&r.touched.email?Object(h.jsx)("div",{style:{color:"red"},children:r.errors.email}):null,Object(h.jsx)("div",{children:Object(h.jsx)("input",{id:"password",name:"password",type:"password",onChange:r.handleChange,value:r.values.password,placeholder:"Password",className:"".concat($e.a.input," ").concat(r.errors.password&&r.touched.password?$e.a.errorInput:$e.a.input),onBlur:r.handleBlur})}),r.errors.password&&r.touched.password?Object(h.jsx)("div",{style:{color:"red"},children:r.errors.password}):null,Object(h.jsx)("div",{children:Object(h.jsx)("input",{id:"rememberMe",name:"rememberMe",type:"checkbox",checked:r.values.rememberMe,onChange:r.handleChange})}),Object(h.jsx)("button",{type:"submit",disabled:!(r.dirty&&r.isValid),className:$e.a.button,children:"Submit"}),t&&Object(h.jsx)("div",{style:{color:"red"},children:t})]})},tt="SET_INITIALIZED",nt={initialized:!1},st=function(){return Object(h.jsx)("h1",{children:"Error: PAGE NOT FOUND"})},rt=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(h.jsxs)("div",{className:"app-wrapper",children:[Object(h.jsx)(Je,{}),Object(h.jsx)(f,{}),Object(h.jsx)("div",{className:"app-wrapper-content",children:Object(h.jsxs)(g.d,{children:[Object(h.jsx)(g.b,{exact:!0,path:"/",render:function(){return Object(h.jsx)(g.a,{to:"/profile"})}}),Object(h.jsx)(g.b,{path:"/profile/:userId?",render:function(){return Object(h.jsx)(qe,{})}}),Object(h.jsx)(g.b,{path:"/dialogs",render:function(){return Object(h.jsx)(D,{})}}),Object(h.jsx)(g.b,{path:"/settings",render:function(){return Object(h.jsx)(E,{})}}),Object(h.jsx)(g.b,{path:"/users",render:function(){return Object(h.jsx)(ge,{})}}),Object(h.jsx)(g.b,{path:"/login",render:function(){return Object(h.jsx)(et,{})}}),Object(h.jsx)(g.b,{path:"/404",render:function(){return Object(h.jsx)(st,{})}}),Object(h.jsx)(g.a,{from:"*",to:"/404"})]})})]}):Object(h.jsx)(ue,{})}}]),n}(r.a.Component),at=Object(N.c)(g.g,Object(k.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(Ye());Promise.all([t]).then((function(){e({type:tt})}))}}}))(rt),it={},ct=n(114),ot=Object(N.b)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case we:return Object(m.a)(Object(m.a)({},e),{},{posts:[].concat(Object(O.a)(e.posts),[{id:3,message:t.newPostText,likesCount:0}])});case ye:return Object(m.a)(Object(m.a)({},e),{},{profile:t.profile});case Se:return Object(m.a)(Object(m.a)({},e),{},{status:t.status});case"DELETE_POST":return Object(m.a)(Object(m.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.postId}))});default:return e}},dialogsPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(m.a)(Object(m.a)({},e),{},{messages:[].concat(Object(O.a)(e.messages),[{id:Object(x.a)(),message:t.newMessageText}])});default:return e}},sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it;return e},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(m.a)(Object(m.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(m.a)(Object(m.a)({},e),{},{followed:!0}):e}))});case Y:return Object(m.a)(Object(m.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(m.a)(Object(m.a)({},e),{},{followed:!1}):e}))});case K:return Object(m.a)(Object(m.a)({},e),{},{users:t.users});case Z:return Object(m.a)(Object(m.a)({},e),{},{currentPage:t.currentPage});case J:return Object(m.a)(Object(m.a)({},e),{},{totalUsersCount:t.totalCount});case Q:return Object(m.a)(Object(m.a)({},e),{},{isFetching:t.isFetching});case $:return Object(m.a)(Object(m.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(O.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ve:return Object(m.a)(Object(m.a)({},e),t.payload);case"SET_ERROR":return Object(m.a)(Object(m.a)({},e),{},{error:t.error});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case tt:return Object(m.a)(Object(m.a)({},e),{},{initialized:!0});default:return e}}}),ut=Object(N.d)(ot,Object(N.a)(ct.a));window.store=ut,c.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(j.a,{children:Object(h.jsx)(k.a,{store:ut,children:Object(h.jsx)(at,{})})})}),document.getElementById("root")),a()},31:function(e,t,n){e.exports={formContainer:"Login_formContainer__R1MBc",inputContainer:"Login_inputContainer__1N5-3",input:"Login_input__33PcP",errorInput:"Login_errorInput__1HPLT",button:"Login_button__2LEuv"}},43:function(e,t,n){e.exports={userPhoto:"Users_userPhoto__1rpAC",selectPageActive:"Users_selectPageActive__1msBc",selectPage:"Users_selectPage__2Jnyx"}},59:function(e,t,n){e.exports={input:"MyPosts_input__31FQr",errorInput:"MyPosts_errorInput__21Llc"}},60:function(e,t,n){e.exports={header:"Header_header__1SWsU",loginBlock:"Header_loginBlock__1UZHx"}}},[[245,1,2]]]);
//# sourceMappingURL=main.14e94a89.chunk.js.map